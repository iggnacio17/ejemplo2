<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üé• Gestor de Videos</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e1e1e;
      color: #ffffff;
      margin: 0;
      display: flex;
    }
    aside {
      width: 200px;
      background: #2c2c2c;
      padding: 20px 10px;
      height: 100vh;
    }
    aside h1 {
      font-size: 18px;
      text-align: center;
      margin-bottom: 20px;
    }
    aside button {
      width: 100%;
      margin: 5px 0;
      padding: 10px;
      background-color: #4CAF50;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
    }
    aside button:hover {
      background-color: #45a049;
    }
    main { flex: 1; padding: 20px; }
    .filtros {
      margin-bottom: 20px;
    }
    .filtros input, .filtros select {
      width: 90%;
      max-width: 400px;
      margin: 5px 0;
      padding: 8px;
      border-radius: 4px;
      border: none;
    }
    .tab { display: none; }
    .tab.active { display: block; }
    .galeria {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }
    .video-card, .short-card {
      background: #3a3a3a;
      border-radius: 10px;
      padding: 10px;
      text-align: center;
      height: 100%;
    }
    .video-card img, .short-card img {
      width: 100%;
      height: auto;
      max-height: 300px;
      object-fit: cover;
      border-radius: 10px;
      cursor: pointer;
    }
    .video-name {
      font-weight: bold;
      font-size: 16px;
      margin-top: 8px;
    }
    .video-card p {
      font-size: 13px;
      margin: 6px 0;
    }
    .acciones span {
      margin: 0 5px;
      cursor: pointer;
      font-size: 18px;
    }
    .formulario input, .formulario select, .formulario button {
      display: block;
      margin: 8px 0;
      width: 90%;
      max-width: 400px;
      padding: 8px;
    }
    .formulario {
      background: #2c2c2c;
      padding: 20px;
      border-radius: 10px;
    }
    .tag {
      background-color: #555;
      border-radius: 5px;
      padding: 2px 6px;
      margin: 2px;
      display: inline-block;
      cursor: pointer;
    }
    .edit-form {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #2c2c2c;
      padding: 20px;
      border-radius: 10px;
      z-index: 100;
      width: 90%;
      max-width: 500px;
    }
    .edit-form h2 {
      margin-top: 0;
    }
    .edit-form-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
    }
    .edit-form-buttons button {
      width: 48%;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 99;
    }
  </style>
</head>
<body>
  <aside>
    <h1>üé• Videos</h1>
    <button onclick="mostrarTab('galeriaTab')">Galer√≠a</button>
    <button onclick="mostrarTab('formularioTab')">Nuevo Video</button>
    <button onclick="mostrarTab('shortsTab')">Nuevo Short</button>
    <button onclick="mostrarTab('favoritosTab')">‚≠ê Favoritos</button>
    <button onclick="exportarBaseDatos()">‚¨áÔ∏è Exportar</button>
    <button onclick="document.getElementById('importInput').click()">‚¨ÜÔ∏è Importar</button>
    <input type="file" id="importInput" accept=".json" style="display: none" onchange="importarBaseDatos(event)">
  </aside>
  <main>
    <div class="tab active" id="galeriaTab">
      <div class="filtros">
        <input type="text" id="buscador" placeholder="Buscar por nombre, actriz o categor√≠a" oninput="filtrarVideos()">
        <select id="categoriaFiltro" onchange="filtrarVideos()">
          <option value="">üìÇ Todas las categor√≠as</option>
        </select>
      </div>
      <div class="galeria" id="galeria"></div>
    </div>
    <div class="tab" id="formularioTab">
      <div class="formulario">
        <input type="text" id="videoUrl" placeholder="Enlace del video">
        <input type="text" id="imageUrl" placeholder="Enlace de la imagen">
        <input type="text" id="videoNombre" placeholder="Nombre del video">
        <input type="text" id="nuevaActriz" placeholder="Agregar actrices (separadas por comas)">
        <select id="actrizSelect" multiple></select>
        <input type="text" id="nuevaCategoria" placeholder="Agregar categor√≠as (separadas por comas)">
        <select id="categoriaSelect" multiple></select>
        <input type="text" id="nuevaCarpeta" placeholder="Nueva carpeta">
        <select id="carpetaSelect"></select>
        <button onclick="guardarVideo()">Guardar Video</button>
      </div>
    </div>
    <div class="tab" id="shortsTab">
      <div class="formulario">
        <input type="text" id="shortUrl" placeholder="Enlace del short">
        <input type="text" id="shortImageUrl" placeholder="Enlace de la imagen">
        <button onclick="guardarShort()">Guardar Short</button>
      </div>
      <div class="galeria" id="galeriaShorts" style="margin-top: 20px;"></div>
    </div>
    <div class="tab" id="favoritosTab">
      <div class="galeria" id="galeriaFavoritos"></div>
    </div>
  </main>

  <!-- Formulario de edici√≥n (oculto inicialmente) -->
  <div id="editFormContainer" style="display: none;">
    <div class="overlay" onclick="cerrarFormularioEdicion()"></div>
    <div class="edit-form">
      <h2>Editar Video</h2>
      <input type="text" id="editVideoUrl" placeholder="Enlace del video">
      <input type="text" id="editImageUrl" placeholder="Enlace de la imagen">
      <input type="text" id="editVideoNombre" placeholder="Nombre del video">
      <input type="text" id="editNuevaActriz" placeholder="Agregar actrices (separadas por comas)">
      <select id="editActrizSelect" multiple></select>
      <input type="text" id="editNuevaCategoria" placeholder="Agregar categor√≠as (separadas por comas)">
      <select id="editCategoriaSelect" multiple></select>
      <input type="text" id="editNuevaCarpeta" placeholder="Nueva carpeta">
      <select id="editCarpetaSelect"></select>
      <div class="edit-form-buttons">
        <button onclick="actualizarVideo()">Guardar Cambios</button>
        <button onclick="cerrarFormularioEdicion()" style="background-color: #f44336;">Cancelar</button>
      </div>
    </div>
  </div>

  <script>
    const PASSWORD = "finnCracK12@";
    const videosKey = 'videos';
    const shortsKey = 'shorts';
    const actoresKey = 'actrices';
    const categoriasKey = 'categorias';
    const carpetasKey = 'carpetas';
    const favoritosKey = 'favoritos';
    const favoritosShortsKey = 'favoritosShorts';

    const galeria = document.getElementById('galeria');
    const galeriaShorts = document.getElementById('galeriaShorts');
    const galeriaFavoritos = document.getElementById('galeriaFavoritos');
    const buscador = document.getElementById('buscador');
    const categoriaFiltro = document.getElementById('categoriaFiltro');
    let videoActualEditando = null;

    // Inicializaci√≥n al cargar la p√°gina
    document.addEventListener('DOMContentLoaded', function() {
      pedirContrasena();
    });

    function mostrarTab(id) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      
      if (id === "galeriaTab") {
        cargarVideos(true);
      } else if (id === "shortsTab") {
        cargarShorts();
      } else if (id === "favoritosTab") {
        cargarFavoritos();
      } else if (id === "formularioTab") {
        // Actualizar los selects al mostrar el formulario
        actualizarSelect(document.getElementById('actrizSelect'), getData(actoresKey));
        actualizarSelect(document.getElementById('categoriaSelect'), getData(categoriasKey));
        actualizarSelect(document.getElementById('carpetaSelect'), getData(carpetasKey));
      }
    }

    function getData(key) {
      const data = localStorage.getItem(key);
      return data ? JSON.parse(data) : [];
    }

    function setData(key, data) {
      localStorage.setItem(key, JSON.stringify(data));
    }

    function actualizarSelect(select, data, incluirTodas = false) {
      if (!select) return;
      
      select.innerHTML = '';
      if (incluirTodas) {
        const opt = document.createElement('option');
        opt.value = '';
        opt.textContent = 'üìÇ Todas las categor√≠as';
        select.appendChild(opt);
      }
      
      data.forEach(item => {
        if (item) { // Solo agregar si el item no es null o undefined
          const option = document.createElement('option');
          option.value = item;
          option.textContent = item;
          select.appendChild(option);
        }
      });
    }

    function guardarVideo() {
      const video = {
        videoUrl: document.getElementById('videoUrl').value.trim(),
        imageUrl: document.getElementById('imageUrl').value.trim(),
        videoNombre: document.getElementById('videoNombre').value.trim(),
        actrices: (document.getElementById('nuevaActriz').value || 
                  Array.from(document.getElementById('actrizSelect').selectedOptions).map(o => o.value))
                  .split(',').map(s => s.trim()).filter(Boolean),
        categorias: (document.getElementById('nuevaCategoria').value || 
                    Array.from(document.getElementById('categoriaSelect').selectedOptions).map(o => o.value))
                    .split(',').map(s => s.trim()).filter(Boolean),
        carpeta: document.getElementById('nuevaCarpeta').value.trim() || 
                 document.getElementById('carpetaSelect').value
      };

      if (!video.videoUrl || !video.imageUrl || !video.videoNombre) {
        return alert("Todos los campos son obligatorios");
      }

      // Actualizar listas de actrices, categor√≠as y carpetas
      const actrices = getData(actoresKey);
      const categorias = getData(categoriasKey);
      const carpetas = getData(carpetasKey);

      video.actrices.forEach(a => { 
        if (a && !actrices.includes(a)) actrices.push(a); 
      });
      
      video.categorias.forEach(c => { 
        if (c && !categorias.includes(c)) categorias.push(c); 
      });
      
      if (video.carpeta && !carpetas.includes(video.carpeta)) {
        carpetas.push(video.carpeta);
      }

      setData(actoresKey, actrices);
      setData(categoriasKey, categorias);
      setData(carpetasKey, carpetas);

      // Guardar el video
      const listaVideos = getData(videosKey); 
      listaVideos.push(video); 
      setData(videosKey, listaVideos);

      // Limpiar el formulario
      document.getElementById('videoUrl').value = '';
      document.getElementById('imageUrl').value = '';
      document.getElementById('videoNombre').value = '';
      document.getElementById('nuevaActriz').value = '';
      document.getElementById('nuevaCategoria').value = '';
      document.getElementById('nuevaCarpeta').value = '';

      // Actualizar la vista
      cargarDatos(); 
      mostrarTab('galeriaTab');
    }

    function abrirFormularioEdicion(video) {
      videoActualEditando = video;
      document.getElementById('editVideoUrl').value = video.videoUrl;
      document.getElementById('editImageUrl').value = video.imageUrl;
      document.getElementById('editVideoNombre').value = video.videoNombre;
      document.getElementById('editNuevaActriz').value = video.actrices.join(', ');
      document.getElementById('editNuevaCategoria').value = video.categorias.join(', ');
      document.getElementById('editNuevaCarpeta').value = '';
      document.getElementById('editCarpetaSelect').value = video.carpeta;
      
      // Cargar opciones en los selects
      actualizarSelect(document.getElementById('editActrizSelect'), getData(actoresKey));
      actualizarSelect(document.getElementById('editCategoriaSelect'), getData(categoriasKey));
      actualizarSelect(document.getElementById('editCarpetaSelect'), getData(carpetasKey));
      
      // Seleccionar las opciones existentes
      video.actrices.forEach(actriz => {
        const options = document.getElementById('editActrizSelect').options;
        for (let i = 0; i < options.length; i++) {
          if (options[i].value === actriz) {
            options[i].selected = true;
            break;
          }
        }
      });
      
      video.categorias.forEach(categoria => {
        const options = document.getElementById('editCategoriaSelect').options;
        for (let i = 0; i < options.length; i++) {
          if (options[i].value === categoria) {
            options[i].selected = true;
            break;
          }
        }
      });
      
      document.getElementById('editFormContainer').style.display = 'block';
    }

    function cerrarFormularioEdicion() {
      document.getElementById('editFormContainer').style.display = 'none';
      videoActualEditando = null;
    }

    function actualizarVideo() {
      const videoEditado = {
        videoUrl: document.getElementById('editVideoUrl').value.trim(),
        imageUrl: document.getElementById('editImageUrl').value.trim(),
        videoNombre: document.getElementById('editVideoNombre').value.trim(),
        actrices: (document.getElementById('editNuevaActriz').value || 
                  Array.from(document.getElementById('editActrizSelect').selectedOptions).map(o => o.value))
                  .split(',').map(s => s.trim()).filter(Boolean),
        categorias: (document.getElementById('editNuevaCategoria').value || 
                    Array.from(document.getElementById('editCategoriaSelect').selectedOptions).map(o => o.value))
                    .split(',').map(s => s.trim()).filter(Boolean),
        carpeta: document.getElementById('editNuevaCarpeta').value.trim() || 
                 document.getElementById('editCarpetaSelect').value
      };
      
      if (!videoEditado.videoUrl || !videoEditado.imageUrl || !videoEditado.videoNombre) {
        return alert("Todos los campos son obligatorios");
      }
      
      // Actualizar listas de actrices, categor√≠as y carpetas
      const actrices = getData(actoresKey);
      const categorias = getData(categoriasKey);
      const carpetas = getData(carpetasKey);
      
      videoEditado.actrices.forEach(a => { 
        if (a && !actrices.includes(a)) actrices.push(a); 
      });
      
      videoEditado.categorias.forEach(c => { 
        if (c && !categorias.includes(c)) categorias.push(c); 
      });
      
      if (videoEditado.carpeta && !carpetas.includes(videoEditado.carpeta)) {
        carpetas.push(videoEditado.carpeta);
      }
      
      setData(actoresKey, actrices);
      setData(categoriasKey, categorias);
      setData(carpetasKey, carpetas);
      
      // Actualizar el video en la lista
      const videos = getData(videosKey);
      const index = videos.findIndex(v => v.videoUrl === videoActualEditando.videoUrl);
      
      if (index !== -1) {
        videos[index] = videoEditado;
        setData(videosKey, videos);
        
        // Actualizar favoritos si cambi√≥ la URL
        if (videoEditado.videoUrl !== videoActualEditando.videoUrl) {
          const favoritos = getData(favoritosKey);
          const favIndex = favoritos.indexOf(videoActualEditando.videoUrl);
          if (favIndex !== -1) {
            favoritos[favIndex] = videoEditado.videoUrl;
            setData(favoritosKey, favoritos);
          }
        }
      }
      
      cerrarFormularioEdicion();
      cargarDatos();
    }

    function crearCard(video, favoritos) {
      const card = document.createElement('div');
      card.className = 'video-card';
      
      const img = document.createElement('img');
      img.src = video.imageUrl;
      img.onclick = () => { 
        copiarEnlace(video.videoUrl); 
        window.open(video.videoUrl, '_blank'); 
      };
      
      const nombre = document.createElement('div');
      nombre.className = 'video-name';
      nombre.textContent = video.videoNombre;
      
      const etiquetas = document.createElement('p');
      video.actrices.forEach(actriz => {
        const tag = document.createElement('span');
        tag.className = 'tag';
        tag.textContent = actriz;
        tag.onclick = (e) => { 
          e.stopPropagation();
          buscador.value = actriz; 
          filtrarVideos(); 
        };
        etiquetas.appendChild(tag);
      });
      
      video.categorias.forEach(cat => {
        const tag = document.createElement('span');
        tag.className = 'tag';
        tag.textContent = cat;
        tag.onclick = (e) => { 
          e.stopPropagation();
          buscador.value = cat; 
          filtrarVideos(); 
        };
        etiquetas.appendChild(tag);
      });
      
      const carpeta = document.createElement('p');
      carpeta.textContent = `üìÅ ${video.carpeta || 'Sin categor√≠a'}`;
      
      const acciones = document.createElement('div');
      acciones.className = 'acciones';
      
      const star = document.createElement('span');
      star.textContent = favoritos.includes(video.videoUrl) ? '‚≠ê' : '‚òÜ';
      star.onclick = (e) => {
        e.stopPropagation();
        toggleFavorito(video.videoUrl);
      };
      
      const copy = document.createElement('span');
      copy.textContent = 'üìã';
      copy.onclick = (e) => {
        e.stopPropagation();
        copiarEnlace(video.videoUrl);
      };
      
      const edit = document.createElement('span');
      edit.textContent = '‚úèÔ∏è';
      edit.onclick = (e) => { 
        e.stopPropagation(); 
        abrirFormularioEdicion(video); 
      };
      
      const trash = document.createElement('span');
      trash.textContent = 'üóëÔ∏è';
      trash.onclick = (e) => {
        e.stopPropagation();
        eliminarVideo(video.videoUrl);
      };
      
      acciones.append(star, copy, edit, trash);
      card.append(img, nombre, etiquetas, carpeta, acciones);
      return card;
    }

    function cargarVideos(aleatorio = false) {
      const videos = getData(videosKey);
      const favoritos = getData(favoritosKey);
      const filtroCategoria = categoriaFiltro.value;
      const query = buscador.value.toLowerCase();
      
      let mostrar = [...videos]; // Copia del array original
      
      // Aplicar filtros
      if (query) {
        mostrar = mostrar.filter(v => 
          v.videoNombre?.toLowerCase().includes(query) || 
          v.actrices?.some(a => a?.toLowerCase().includes(query)) || 
          v.categorias?.some(c => c?.toLowerCase().includes(query))
        );
      }
      
      if (filtroCategoria) {
        mostrar = mostrar.filter(v => 
          v.categorias?.includes(filtroCategoria)
        );
      } else if (!query && aleatorio) {
        // Mostrar selecci√≥n aleatoria si no hay b√∫squeda ni filtro
        mostrar = [...videos].sort(() => 0.5 - Math.random()).slice(0, 15);
      }
      
      galeria.innerHTML = '';
      mostrar.forEach(video => {
        if (video) { // Solo agregar si el video existe
          galeria.appendChild(crearCard(video, favoritos));
        }
      });
    }

    function filtrarVideos() { 
      cargarVideos(false); 
    }

    function cargarDatos() {
      // Asegurarse de que los datos existen
      if (!getData(videosKey)) setData(videosKey, []);
      if (!getData(shortsKey)) setData(shortsKey, []);
      if (!getData(actoresKey)) setData(actoresKey, []);
      if (!getData(categoriasKey)) setData(categoriasKey, []);
      if (!getData(carpetasKey)) setData(carpetasKey, []);
      if (!getData(favoritosKey)) setData(favoritosKey, []);
      if (!getData(favoritosShortsKey)) setData(favoritosShortsKey, []);
      
      // Actualizar selects
      actualizarSelect(document.getElementById('actrizSelect'), getData(actoresKey));
      actualizarSelect(document.getElementById('categoriaSelect'), getData(categoriasKey));
      actualizarSelect(document.getElementById('carpetaSelect'), getData(carpetasKey));
      actualizarSelect(categoriaFiltro, getData(categoriasKey), true);
      
      // Cargar videos
      cargarVideos(true);
    }

    function toggleFavorito(videoUrl) {
      const favoritos = getData(favoritosKey);
      const index = favoritos.indexOf(videoUrl);
      
      if (index === -1) {
        favoritos.push(videoUrl);
      } else {
        favoritos.splice(index, 1);
      }
      
      setData(favoritosKey, favoritos);
      cargarVideos();
    }

    function copiarEnlace(enlace) {
      navigator.clipboard.writeText(enlace).then(() => {
        alert("Enlace copiado al portapapeles");
      }).catch(err => {
        console.error("Error al copiar: ", err);
      });
    }

    function eliminarVideo(videoUrl) {
      if (confirm("¬øEst√°s seguro de que quieres eliminar este video?")) {
        let videos = getData(videosKey);
        videos = videos.filter(v => v.videoUrl !== videoUrl);
        setData(videosKey, videos);
        
        // Eliminar de favoritos si est√° all√≠
        let favoritos = getData(favoritosKey);
        favoritos = favoritos.filter(url => url !== videoUrl);
        setData(favoritosKey, favoritos);
        
        cargarVideos();
      }
    }

    function cargarFavoritos() {
      const videos = getData(videosKey);
      const favoritos = getData(favoritosKey);
      const mostrar = videos.filter(v => favoritos.includes(v.videoUrl));
      
      galeriaFavoritos.innerHTML = '';
      mostrar.forEach(video => {
        if (video) { // Solo agregar si el video existe
          galeriaFavoritos.appendChild(crearCard(video, favoritos));
        }
      });
    }

    function guardarShort() {
      const short = {
        shortUrl: document.getElementById('shortUrl').value.trim(),
        imageUrl: document.getElementById('shortImageUrl').value.trim()
      };
      
      if (!short.shortUrl || !short.imageUrl) {
        return alert("Todos los campos son obligatorios");
      }
      
      const lista = getData(shortsKey); 
      lista.push(short); 
      setData(shortsKey, lista);
      
      document.getElementById('shortUrl').value = '';
      document.getElementById('shortImageUrl').value = '';
      cargarShorts();
    }

    function cargarShorts() {
      const shorts = getData(shortsKey);
      const favoritos = getData(favoritosShortsKey);
      
      galeriaShorts.innerHTML = '';
      shorts.forEach(short => {
        if (short) { // Solo agregar si el short existe
          const card = document.createElement('div');
          card.className = 'short-card';
          
          const img = document.createElement('img');
          img.src = short.imageUrl;
          img.onclick = () => { 
            copiarEnlace(short.shortUrl); 
            window.open(short.shortUrl, '_blank'); 
          };
          
          const acciones = document.createElement('div');
          acciones.className = 'acciones';
          
          const star = document.createElement('span');
          star.textContent = favoritos.includes(short.shortUrl) ? '‚≠ê' : '‚òÜ';
          star.onclick = (e) => {
            e.stopPropagation();
            toggleFavoritoShort(short.shortUrl);
          };
          
          const copy = document.createElement('span');
          copy.textContent = 'üìã';
          copy.onclick = (e) => {
            e.stopPropagation();
            copiarEnlace(short.shortUrl);
          };
          
          const trash = document.createElement('span');
          trash.textContent = 'üóëÔ∏è';
          trash.onclick = (e) => {
            e.stopPropagation();
            eliminarShort(short.shortUrl);
          };
          
          acciones.append(star, copy, trash);
          card.append(img, acciones);
          galeriaShorts.appendChild(card);
        }
      });
    }

    function toggleFavoritoShort(shortUrl) {
      const favoritos = getData(favoritosShortsKey);
      const index = favoritos.indexOf(shortUrl);
      
      if (index === -1) {
        favoritos.push(shortUrl);
      } else {
        favoritos.splice(index, 1);
      }
      
      setData(favoritosShortsKey, favoritos);
      cargarShorts();
    }

    function eliminarShort(shortUrl) {
      if (confirm("¬øEst√°s seguro de que quieres eliminar este short?")) {
        let shorts = getData(shortsKey);
        shorts = shorts.filter(s => s.shortUrl !== shortUrl);
        setData(shortsKey, shorts);
        
        // Eliminar de favoritos si est√° all√≠
        let favoritos = getData(favoritosShortsKey);
        favoritos = favoritos.filter(url => url !== shortUrl);
        setData(favoritosShortsKey, favoritos);
        
        cargarShorts();
      }
    }

    function exportarBaseDatos() {
      const data = {
        videos: getData(videosKey),
        shorts: getData(shortsKey),
        actrices: getData(actoresKey),
        categorias: getData(categoriasKey),
        carpetas: getData(carpetasKey),
        favoritos: getData(favoritosKey),
        favoritosShorts: getData(favoritosShortsKey)
      };
      
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'videos_backup.json';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function importarBaseDatos(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const data = JSON.parse(e.target.result);
          
          if (data.videos) setData(videosKey, data.videos);
          if (data.shorts) setData(shortsKey, data.shorts);
          if (data.actrices) setData(actoresKey, data.actrices);
          if (data.categorias) setData(categoriasKey, data.categorias);
          if (data.carpetas) setData(carpetasKey, data.carpetas);
          if (data.favoritos) setData(favoritosKey, data.favoritos);
          if (data.favoritosShorts) setData(favoritosShortsKey, data.favoritosShorts);
          
          alert("Base de datos importada con √©xito");
          cargarDatos();
        } catch (error) {
          alert("Error al importar el archivo: " + error.message);
        }
      };
      reader.readAsText(file);
      event.target.value = ''; // Resetear el input
    }

    function pedirContrasena() {
      const input = prompt("Introduce la contrase√±a:");
      if (input !== PASSWORD) {
        alert("Contrase√±a incorrecta. Acceso denegado.");
        document.body.innerHTML = "<h1 style='color: red; text-align:center;'>Acceso Denegado</h1>";
      } else {
        // Inicializar datos si no existen
        if (!localStorage.getItem(videosKey)) setData(videosKey, []);
        if (!localStorage.getItem(shortsKey)) setData(shortsKey, []);
        if (!localStorage.getItem(actoresKey)) setData(actoresKey, []);
        if (!localStorage.getItem(categoriasKey)) setData(categoriasKey, []);
        if (!localStorage.getItem(carpetasKey)) setData(carpetasKey, []);
        if (!localStorage.getItem(favoritosKey)) setData(favoritosKey, []);
        if (!localStorage.getItem(favoritosShortsKey)) setData(favoritosShortsKey, []);
        
        cargarDatos();
      }
    }
  </script>
</body>
</html>
